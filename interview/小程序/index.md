# 工程化搭建

## 背景

- 先有了苏银消金app，再打算通过微信小程序打开微信渠道，主要的话有三大模块授信/用信/还款

## 为什么不使用跨端框架

- 因为只打算做微信端的小程序，并不需要跨端

## 为什么要使用Webpack打包 工程化意义

- 小程序需要长期维护/多人开发，因此工程化比较重要

## 重难点

- 微信小程序双线程建构，每个页面运行在单独的webview，js运行在单独的js线程，因此适合webpack多入口打包，每个页面都是一个入口
- 小程序对主包有大小限制，因此需要抽离webpack的公共模块和运行时
- 微信小程序使用js，因此需要使用babel转译
- 微信小程序使用wxss，因此需要使用postcss转译
- 微信小程序使用wxml，copywebpackplugin拷贝wxml文件
- 动态入口和chunk文件注入
- 表单比较多 async-validator 数据双向绑定和校验
- 微信小程序的api默认callback promise封装
- 强校验场景比较多 强检验方式做了单独抽离，人脸校验组件/交易密码组件等
- 跨组件通讯方式比较少 发布订阅
- 前后端交互 封装请求api 请求响应拦截，请求取消
